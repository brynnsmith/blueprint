<%- include('partials/header') -%>
<section class="">
  <section class="userArea">
      <section class="sectionInlay userInfo">
        <div class="one-third justify">
          <div class="displayPic">
            <%= user.userName[0] %>
            <%#<img src="" alt="user's profile image">%>
          </div>
          <div class="userInfoTextArea">
              <span class="userInfoText"><strong>User Name</strong>: <%= user.userName %></span>
              <span class="userInfoText"><strong>Job Title</strong>: <%= user.jobTitle %></span>
          </div>
        </div>
          <div class="nextInterview">
            <strong>Next Interview:</strong> 
            <% if (events.length) { %>
              <%= interviews[0].intCompany %> <br>
              <%= interviews[0].intDate.toDateString()%> @ <%= interviews[0].intTime %>
            <% } %>
            <span>No interviews scheduled.</span>
          </div>
          <div class="nextCoffeeChat">
            <strong>Next Event:</strong> 
            <% if (events.length) { %>
              <%= events[0].eventDate.toDateString()%><br>
              <%= events[0].eventTitle %>
            <% } %>
            <span>No events scheduled.</span>
          </div>
      </section>

      <br><br>
      <%# Job Feed %>
      <div class="jobBoardHeader">
          <h2 class="profileHeader">My Job Board</h2>
          <a href="/addJob" class="add-btn"><i class="fa fa-circle-plus fa-2x"></i> <span class="addBtnText">Add a Job</span></a>
      </div>
       <%# TODO: Update colour based on interest level, maybe add a special marking or layout so it isn't entirely colour dependent %>

      <section class="job-container">

        <%# Active Jobs %>
        <div class="one-quarter">
          <h3 class="h3-2">Active</h3>
          <section class="sectionInlay jobBoard ">
            <% if (jobPosts.length === 0) { %> 
              <div class="defaultBlock">
                <h3 class="defaultText"><a href="/addJob" class="link">Add a Job</a> to get started.</h3>
              </div>
            <% } %>
            <div class="grid-item">
              <ul class="jobList">
              <% for(var i=0; i<jobPosts.length; i++) {%>
                <a href="/jobPost/<%= jobPosts[i]._id%>" class="">
                  <li class="jobListItem">
                    <div class="displayPic companyLogo">
                      <span class="displayPicText">
                        <%= jobPosts[i].company[0]%>
                      </span>
                    </div>
                    <div>
                      <h2 class="jobListText jobListTitle"><%= jobPosts[i].jobTitle%></h2>
                      <h2 class="jobListText"><%= jobPosts[i].company%></h2>
                    </div>
                  </li>
                </a>
              <% } %>
              </ul>
            </div>
          </section>
        </div>

        <%# Jobs Applied %>
        <div class ="one-quarter">
          <h3 class="h3-2">Applied</h3>
          <section class="sectionInlay jobBoard">
            <% if (jobPosts.filter(job => job.applied === true).length === 0) { %> 
                <div class="defaultBlock">
                  <h3 class="defaultText">Active jobs that have been marked as 'Applied' will be listed here.</h3>
                </div>
            <% } %>
            <div class="grid-item">
              <ul class="jobList">
              <% for(var i=0; i<jobPosts.filter(job => job.applied === true).length; i++) {%>
                <a href="/jobPost/<%= jobPosts[i]._id%>" class="">
                  <li class="jobListItem">
                    <div class="displayPic companyLogo">
                      <span class="displayPicText">
                        <%= jobPosts[i].company[0]%>
                      </span>
                    </div>
                    <div>
                      <h2 class="jobListText jobListTitle"><%= jobPosts[i].jobTitle%></h2>
                      <h2 class="jobListText"><%= jobPosts[i].company%></h2>
                    </div>
                  </li>
                </a>
              <% } %>
              </ul>
            </div>
          </section>
        </div>

        <%# Jobs Interviewing For %>
        <div class ="one-quarter">
          <h3 class="h3-2">Interviewing</h3>
          <section class="sectionInlay jobBoard">
            <% if (jobPosts.filter(job => job.interview === true).length === 0) { %> 
              <div class="defaultBlock">
                <h3 class="defaultText">Active jobs that have been marked as 'Interviewing' will be listed here.</h3>
              </div>
            <% } %>
            <div class="grid-item">
              <ul class="jobList">
              <% for(var i=0; i<jobPosts.filter(job => job.interview === true).length; i++) {%>
                <a href="/jobPost/<%= jobPosts[i]._id%>" class="">
                  <li class="jobListItem">
                    <div class="displayPic companyLogo">
                      <span class="displayPicText">
                        <%= jobPosts[i].company[0]%>
                      </span>
                    </div>
                    <div>
                      <h2 class="jobListText jobListTitle"><%= jobPosts[i].jobTitle%></h2>
                      <h2 class="jobListText"><%= jobPosts[i].company%></h2>
                    </div>
                  </li>
                </a>
              <% } %>
              </ul>
            </div>
          </section>
        </div>

        
        <%# Job Offers %>
      
        <div class ="one-quarter">
          <h3 class="h3-2">Offers</h3>
          <section class="sectionInlay jobBoard">
            <% if (jobPosts.filter(job => job.offer === true).length === 0) { %> 
              <div class="defaultBlock">
                <h3 class="defaultText">Active jobs that have been marked as 'Offered' will be listed here.</h3>
              </div>
            <% } %>
            <div class="grid-item">
              <ul class="jobList">
              <% for(var i=0; i<jobPosts.filter(job => job.offer === true).length; i++) {%>
                <a href="/jobPost/<%= jobPosts[i]._id%>" class="">
                  <li class="jobListItem">
                    <div class="displayPic companyLogo">
                      <span class="displayPicText">
                        <%= jobPosts[i].company[0]%>
                      </span>
                    </div>
                    <div>
                      <h2 class="jobListText jobListTitle"><%= jobPosts[i].jobTitle%></h2>
                      <h2 class="jobListText"><%= jobPosts[i].company%></h2>
                    </div>
                  </li>
                </a>
              <% } %>
              </ul>
            </div>
          </section>
        </div>
        
      </section>
      

      <%# Interview Feed %>
      <div class="jobBoardHeader">
        <h2 class="profileHeader">Interviews</h2>
        <a href="/addInterview" class="add-btn"><i class="fa fa-circle-plus fa-2x"></i> <span class="addBtnText">Add an Interview</span></a>
      </div>
      <section class="sectionInlay jobBoard">
        <div class="grid-item">
          <ul class="jobList">
          <% for(var i=0; i<interviews.length; i++) {%>
            <a href="/interview/<%= interviews[i]._id%>" class="">
              <li class="jobListItem">
                <div class="displayPic companyLogo">
                  <span class="displayPicText">
                    <% if (interviews[i].intCompany) { %> 
                    <%= interviews[i].intCompany[0]%>
                    <% } %>
                  </span>
                </div>
                <div>
                  <h2 class="jobListText jobListTitle"><%= interviews[i].intDate.toDateString()%></h2>
                  <% if (interviews[i].intTime.split(':')[0] === '00') { %>
                    <h2 class="jobListText">12:<%= interviews[i].intTime.split(':')[1]%>am @ <%= interviews[i].intLocation%></h2>
                  <% } else if (interviews[i].intTime.split(':')[0] > 12) { %>
                    <h2 class="jobListText"><%= interviews[i].intTime.split(':')[0]-=12 %>:<%= interviews[i].intTime.split(':')[1]%>pm @ <%= interviews[i].intLocation %></h2>
                  <% } else if (interviews[i].intTime.split(':')[0] === '12') { %>
                    <h2 class="jobListText">12:<%= interviews[i].intTime.split(':')[1]%>pm @ <%= interviews[i].intLocation%></h2>
                  <% } else if (interviews[i].intTime[0] === '0') { %>
                    <h2 class="jobListText"><%= interviews[i].intTime.slice(1)%>am @ <%= interviews[i].intLocation%></h2>
                  <% } else { %>
                    <h2 class="jobListText"><%= interviews[i].intTime%>am @ <%= interviews[i].intLocation  %></h2>
                  <% } %>
                  <h2 class="jobListText"><%= interviews[i].intCompany%></h2>
                </div> 
              </li>
            </a>
          <% } %>
          </ul>
        </div>
      </section>

      <%# Coffee Chat Feed %>
      <div class="jobBoardHeader">
        <h2 class="profileHeader">Networking Events</h2>
        <a href="/addEvent" class="add-btn" type="button"><i class="fa fa-circle-plus fa-2x"></i> <span class="addBtnText">Add an Event</span></a>
      </div>
       <%# TODO:  %>
      <section class="sectionInlay jobBoard">
        <div class="grid-item">
          <ul class="jobList">
          <% for(var i=0; i<events.length; i++) {%>
            <a href="/event/<%= events[i]._id%>" class="">
              <li class="jobListItem">
                <div class="displayPic companyLogo">
                  <span class="displayPicText">
                    <%= events[i].eventTitle[0]%>
                  </span>
                </div>
                <div>
                  <h2 class="jobListText jobListTitle"><%= events[i].eventDate.toDateString()%></h2>
                  <% if (events[i].eventTime.split(':')[0] === '00') { %>
                    <h2 class="jobListText">12:<%= events[i].eventTime.split(':')[1]%>am @ <%= events[i].eventLocation%></h2>
                  <% } else if (events[i].eventTime.split(':')[0] > 12) { %>
                    <h2 class="jobListText"><%= events[i].eventTime.split(':')[0]-=12 %>:<%= events[i].eventTime.split(':')[1]%>pm @ <%= events[i].eventLocation %></h2>
                  <% } else if (events[i].eventTime.split(':')[0] === '12') { %>
                    <h2 class="jobListText">12:<%= events[i].eventTime.split(':')[1]%>pm @ <%= events[i].eventLocation%></h2>
                  <% } else if (events[i].eventTime[0] === '0') { %>
                    <h2 class="jobListText"><%= events[i].eventTime.slice(1)%>am @ <%= events[i].eventLocation%></h2>
                  <% } else { %>
                    <h2 class="jobListText"><%= events[i].eventTime%>am @ <%= events[i].eventLocation  %></h2>
                  <% } %>
                  <h2 class="jobListText"><%= events[i].eventTitle%></h2>
                </div> 
              </li>
            </a>
          <% } %>
          </ul>
        </div>
      </section>

  </section>
</section>
<%- include('partials/footer') -%>


        <%#
          <div class="">
            <a class="btn btn-primary" href="/feed">Return to Feed</a>
          </div>  
        </div>
        %>
        